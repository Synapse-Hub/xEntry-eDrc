use xEntryDbz
go

CREATE TABLE DATAEXPLOITATION
(
	id_dataexp int identity(1,1),
	id_asso varchar(25) NOT NULL,
	id_season varchar(6) NOT NULL,
	age_plant float null,
	id_agent varchar(6) NOT NULL,
	datefield datetime null,
	superficie float null,
	lignenumero int null,
	longueurligne float null,
	relieffield varchar(20) null,
	pentefield varchar(20) null,
	solfield varchar(20) null,
	constraint pk_datexpl primary key (id_dataexp),
	constraint fk_datexp_asso foreign key(id_asso) references ASSO(id_asso),
	constraint fk_datexp_season foreign key(id_season) references SEASON(id_season)
)
go

CREATE TABLE ESSENCE
(
	id_essence varchar(10) not null,
	libessence varchar(75) not null,
	constraint pk_essence primary key(id_essence),
	constraint uk_libessence UNIQUE (libessence)
)
go

CREATE TABLE DETAILEXPLOITATION
(
	id_detailsexp int identity(1,1),
	id_dataexp int not null,
	id_essence varchar(10) not null,
	circonference float null,
	hauteur float null,
	qualite1 int null,
	qualite2 int null,
	qualite3 int null,
	remarques varchar(25) null,
	constraint pk_details_exp primary key(id_detailsexp),
	constraint fk_details_et_expl foreign key(id_dataexp) references DATAEXPLOITATION(id_dataexp),
	constraint fk_det_ess foreign key(id_essence) references ESSENCE(id_essence)
)
go

INSERT INTO ESSENCE values('euc-sal','Eucalyptus Saligna'),('euc-mai','Eucalyptus Maidenii'),('euc-calm','Eucalyptus Calmadulens'),
						  ('grev-rob','Grevilea Tobusta'),('sen-sea','Senna Siamea'),('ced-od','Cedrella Odorata'),('aca-mea','Accasia Meansii'),
						  ('euc-mea','Eucalyptus Meansi')